ПАТТЕРН PROXY (ЗАМЕСТИТЕЛЬ)

Название и классификация паттерна
Заместитель — паттерн, структурирующий объекты.

Назначение
Является суррогатом другого объекта и контролирует доступ к нему.

Другие названия
Surrogate (суррогат).

Мотивация
Одна из причин для управления доступом к объекту — возможность отложить
затраты на создание и инициализацию до момента, когда возникнет фактиче-
ская необходимость в объекте. Рассмотрим редактор документов, в котором
в документы могут встраиваться графические объекты. Затраты на создание
некоторых таких объектов (например, больших растровых изображений)
могут быть весьма значительными. Но документ должен открываться быстро,
поэтому следует избегать создания всех «тяжелых» объектов на стадии откры-
тия (и вообще это излишне, поскольку не все они будут видны одновременно).
В связи с такими ограничениями кажется разумным создавать «тяжелые»
объекты по требованию. Это означает «когда изображение становится
видимым». Но что поместить в документ вместо изображения? И как без
усложнения реализации редактора скрыть тот факт, что изображение соз-
дается по требованию? Например, оптимизация не должна отражаться на
коде, отвечающем за рисование и форматирование.
Решение состоит в том, чтобы использовать другой объект — заместитель
изображения, который временно подставляется вместо реального изобра-
жения. Заместитель ведет себя точно так же, как само изображение, и при
необходимости создает его экземпляр.
Заместитель создает настоящее изображение, только если редактор документа
вызовет операцию Draw. Все последующие запросы заместитель переадресует
непосредственно изображению. Поэтому после создания изображения он
должен сохранить ссылку на него.
Предположим, что изображения хранятся в отдельных файлах. В таком
случае мы можем использовать имя файла как ссылку на реальный объект.
Заместитель хранит также размер изображения, то есть длину и ширину.
«Зная» ее, заместитель может отвечать на запросы форматера о своем раз-
мере, не создавая экземпляр изображения.

Структура
![proxy](/images/proxy.png)